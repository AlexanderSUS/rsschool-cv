(()=>{"use strict";const e=d,t=document.getElementById("body"),n=document.querySelector(".slide-prev"),o=document.querySelector(".slide-next");let c=0;const r=[],a={name:"github",url:"https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/"};function i(){let e=Math.floor(20*Math.random())+1;return e<10?e.toString().padStart(2,"0"):e}function u(e,t,n){let o;return"github"==e.name&&(o=`${e.url}${function(){const e=(new Date).getHours();return e<4||e>=20?"night":e<11?"morning":e<17?"afternoon":e<20?"evening":void 0}()}/${t}.jpg`),o}function s(e){c=(e+20)%20}function d(){void 0===r[c]&&(r[c]=function(){let e;for(;;)if(e=u(a,i()),!r.includes(e))return e}());const e=new Image;e.src=r[c],e.onload=()=>{t.style.backgroundImage=`url(${e.src})`}}n.addEventListener("click",(function(){s(c-1),d()})),o.addEventListener("click",(function(){s(c+1),d()}));const l=function(){const e=(new Date).toLocaleDateString("en-EN",m);document.querySelector(".date").textContent=e},m={weekday:"long",month:"long",day:"numeric"},y=function(){const e=new Date;document.querySelector(".time").textContent=e.toLocaleTimeString()},f=document.querySelector(".name");function g(){document.querySelector(".greeting").textContent=`Good ${function(){const e=(new Date).getHours();return e<4||e>=20?"night":e<11?"morning":e<17?"afternoon":e<20?"evening":void 0}()}`}f.placeholder="your name";const p=document.querySelector(".city"),v=document.querySelector(".weather-icon"),S=(document.querySelector(".weather-error"),document.querySelector(".temperature")),h=document.querySelector(".weather-description"),L=document.querySelector(".wind"),q=document.querySelector(".humidity");function w(){!async function(e){const t=await fetch(e),n=await t.json();"400"==n.cod||"404"==n.cod?p.value="Wrong city":"429"==n.cod?S.textContent="Surpasing API Limit":(v.classList.add(`owf-${n.weather[0].id}`),S.textContent=`${Math.round(n.main.temp)}Â°C`,h.textContent=`${n.weather[0].description}`,L.textContent=`Wind speed ${Math.round(n.wind.speed)} m/s`,q.textContent=`Humidity ${Math.round(n.main.humidity)}%`)}(function(e){return`https://api.openweathermap.org/data/2.5/weather?q=${e}&lang=en&appid=fb36af34a9dbb29b6cac739987201322&units=metric`}(p.value))}const E=x;async function x(){const e=await fetch("https://raw.githubusercontent.com/AlexanderSUS/rsschool-cv/momentum/momentum/src/components/quote/data.json"),t=await e.json(),n=(o=t,Math.floor(Math.random()*o.length));var o;document.querySelector(".author").textContent=t[n].text,document.querySelector(".quote").textContent=t[n].author}document.querySelector(".change-quote").addEventListener("click",x);const C=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:39"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"1:37"},{title:"Ennio Morricone",src:"./assets/sounds/Ennio Morricone.mp3",duration:"01:37"},{title:"Summer Wind",src:"./assets/sounds/Summer Wind.mp3",duration:"01:50"}],$=document.getElementById("play"),k=document.querySelector(".play-prev"),I=document.querySelector(".play-next"),b=document.querySelector(".play-list"),M=document.querySelector(".time-range"),A=document.querySelector(".volume-range"),D=document.querySelector(".track-progress"),T=document.querySelector(".track-duration"),W=document.querySelector(".track-name"),j=document.querySelector(".sound-btn");let H;const B=new Audio;let F=0;function N(e){F=(e+C.length)%C.length}function R(){B.src=C[F].src,B.onload=()=>{B.currentTime=0}}function Y(){B.paused?G():P()}function G(){B.play(),$.classList.remove("play"),$.classList.add("pause"),H[F].classList.remove("stopped")}function P(){B.pause(),$.classList.remove("pause"),$.classList.add("play"),H[F].classList.add("stopped")}function U(){document.querySelector(".item-active").classList.remove("item-active")}function z(){R(),O(),document.querySelector(`.play-item:nth-of-type(${F+1})`).classList.add("item-active"),Y()}function J(){U(),N(F-1),z()}function K(){U(),N(F+1),z()}function O(){W.textContent=C[F].title,T.textContent=C[F].duration,_()}function Q(){B.muted?B.muted=!1:B.muted=!0,j.classList.toggle("muted")}function V(){if(B.volume=A.value/1e3,0==B.volume){if(j.classList.contains("muted"))return;j.classList.add("muted")}else j.classList.contains("muted")&&j.classList.remove("muted"),B.muted=!1}function X(e){let t=e.value;e.style.background=`linear-gradient(to right, #c5b358 0%, #c5b358 ${t}%, #fff ${t}%, #fff 100%)`}function Z(e){return e<10?`0${e}`:e}function _(){let e=Math.round(+B.currentTime),t=Math.floor(e/60),n=e%60;D.textContent=`${Z(t)}:${Z(n)}`}B.volume=A.value/1e3,M.value=0,window.onload=()=>{e(),y(),l(),g(),null!==localStorage.getItem("name")&&(f.value=localStorage.getItem("name")),null==localStorage.getItem("city")||""==localStorage.getItem("city")||"Wrong city"==localStorage.getItem("city")?p.value="Minsk":p.value=localStorage.getItem("city"),w(),E(),C.forEach((e=>{const t=document.createElement("li");t.classList.add("play-item"),t.textContent=e.title,b.append(t)})),document.querySelector(".play-item:first-of-type").classList.add("item-active"),document.querySelector(".play-item:first-of-type").classList.add("stopped"),H=b.childNodes,R(),O(),$.addEventListener("click",Y),k.addEventListener("click",J),I.addEventListener("click",K),M.addEventListener("input",(function(){X(M)})),A.addEventListener("input",(function(){X(A)})),B.addEventListener("timeupdate",(()=>{M.value=B.currentTime/B.duration*100,_(),X(M)})),M.addEventListener("input",(()=>{B.currentTime=B.duration*M.value/100})),A.addEventListener("input",V),j.addEventListener("click",Q),B.addEventListener("ended",K),H.forEach(((e,t)=>{e.addEventListener("click",(()=>{t!=F?(U(),F=t,z()):B.paused?G():P()}))}))},setInterval((()=>{l(),y(),g()}),1e3),p.addEventListener("change",w),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",f.value),localStorage.setItem("city",p.value)}))})();